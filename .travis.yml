dist: xenial
language: python
sudo: false
cache:
  directories:
    - $HOME/.cache/pip
python:
  - "2.7"
  - "3.4"
  - "3.5"
  - "3.6"
  - "3.7"
  - "3.8-dev"
  - "pypy3"

install:
  # Ensure modern pip/etc to avoid some issues w/ older worker environs
  - pip install pytest
  - pip install coverage
  - pip install pytest-cov
  - pip install mock
  - pip install codecov # For codecov specifically
  - pip install .

script:
  - cd tests
  - pytest --cov=wait_for_it_to
  - cd $TRAVIS_BUILD_DIR


env:
  - CODECOV_TOKEN="919258c7-ed4b-463f-973a-68fc7a081d2d"

after_success:
  - codecov

deploy:
  provider: pypi
  user: studioj
  distributions: sdist
  password:
    secure: "VNSuFnS12iol4MxlvF+YYyqhiiMbu9TAPXUssLw5ePY1/AFWmJ4ufJKEl8uxF7MJ3w+Cou3O8+poODty/dsR4eXzByV2rBI6S2be8KHRFmJolVx+cw1PG/A7rGikgNhHkIQw3zY3ty/Yr39laNjvlKV/lp4CHAM/43koUwSYS4nQ2qWJfpQuhc67JzpEGQjmNdVuDb+yeNPvIUrG+n2QN43VcwKtrVPTk1xqBjJ5cVpvzhuYpLzGDv7Ffkk59fBX1lbJKaBbfXKN/4Lg2pDK/OsIFF5T8mYjB3ujgtJd0DloKPnfu0/C5R4NSYCIX+Ull92UxrIHF8J2Fytlauzge1z6T35V9Zh/YwjV/QGdE6NjuuBvdUjsJZL8zkZCSUpGA67HWmvLRRDDLnVgWpHP2sfL2ZRWAn7b20l9RJAiPxHxDLLX7Bkw6NWmSxhWcfyKSw/Uk6xhKYZCC9ky++DyeP8AcKgn6kOEtrK15Ocqz/E3fouWO6f6soFFTYy8zmBLz9x2I8ZTrf9BP/29/8Iud9r4EHweQ3rGwCdVqxsbxSEaTO7y4DgofNZI3bROub7OX/pXeeWF6X1unrdf5KCcDPGTowlDF+scjbxThQqfBBxXZZiR9LfBjVh2aC9qBMMYM2dfRwU/akSwHYQE9zqSZQCr5hIgRkCFKaE4d3gETEM="
  on:
    branch: master
    tags: true
    python: 3.7
  repo: studioj/wait_for_it

